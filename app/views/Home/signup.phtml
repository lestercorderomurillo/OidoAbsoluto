<app:view title="Registro de usuario en el proyecto">
    <app:row>
        <app:card columnSize="8" maxWidth="600px">
            <app:form route="signup/submit">

                <app:title-icon imageSource="signup.png" text="Registro de usuario">
                <br>
                
                <app:row>
                    <app:col columnSize="6">
                        <app:label for="first_name">Nombre</app:label>
                        <app:textfield bind="first_name">
                    </app:col>
                    <app:col columnSize="6">
                        <app:label for="last_name">Apellidos</app:label>
                        <app:textfield bind="last_name">
                    </app:col>
                </app:row>

                <app:label for="email">Correo Electrónico</app:label>
                <app:textfield bind="email">

                <app:label for="password">Contraseña</app:label>
                <app:passfield>

                <app:hint>La contraseña solo puede contener letras, números y los siguientes simbolos: # @ . -</app:hint>
                <app:spacing size="2">

                <app:label for="confirm_password">Contraseña</app:label>
                <app:passfield bind="confirm_password">

                <app:label for="country">País de nacimiento</app:label> 
                <app:select bind="country" arrayName="countries">
                    
                <app:row>
                    <app:col columnSize="6">
                        <app:label for="birth_day">Fecha de nacimiento</app:label>
                        <app:date bind="birth_day">
                        <app:error bind="birth_day">
                    </app:col>
                    <app:col columnSize="6">
                        <app:label for="phone">Teléfono</app:label>
                        <app:textfield bind="phone">
                    </app:col>
                </app:row>

                <app:label for="gender">Seleccione su Género</app:label> 
                <app:radio id="0" bind="gender" text="Masculino" value="M">
                <app:radio id="1" bind="gender" text="Femenino" value="F">
                <app:radio id="2" bind="gender" text="Otro" value="O">
                <app:radio id="3" bind="gender" text="No responder" value="-">
                <app:error bind="gender">

                <app:submit-button>Registrarse</app:submit-button>
            </app:form>
        </app:card>
    </app:row>
</app:view>
<script> 
    $('#form').submit(function() {
        event.preventDefault();

        if (PypeValidator.validateDate("birth_day")){
            if($(this).valid()) {
                PypeValidator.parseDateForSubmit("birth_day");
                return true;
            }
        }

        return false;
    });

    $(document).ready(function() {
        $("#form").validate({
            rules: {
                first_name : {
                    required: true,
                    minlength: 3
                },
                last_name: {
                    required: true,
                    minlength: 4
                },
                email: {
                    required: true,
                    email: true
                },
                password: {
                    required: true,
                    minlength: 7,
                    maxlength: 24
                },
                confirm_password: {
                    required: true,
                    equalTo: "#password",
                    minlength: 7,
                    maxlength: 24
                },
                phone: {
                    required: true,
                    number: true,
                    minlength: 7,
                    maxlength: 13
                },
                gender: {
                    required: true
                },
                country: {
                    required: true
                }
            },
            messages : {
                first_name: {
                    required: "El campo del nombre no puede estar vacio",
                    minlength: "El nombre debe de ser al menos de 3 carácteres"
                },
                last_name: {
                    required: "El campo del apellido no puede estar vacio",
                    minlength: "El nombre debe de ser al menos de 3 carácteres"
                },
                email: {
                    required: "El campo del email no puede estar vacio",
                    email: "El formato correcto es: abc@domain.com"
                },
                password: {
                    required: "La contraseña no puede estar vacio",
                    minlength: "La contraseña debe ser de al menos de 7 carácteres",
                    maxlength: "Demasiada extenso"
                },
                confirm_password: {
                    required: "La contraseña no puede estar vacio",
                    equalTo: "Ambas contraseñas deben coincidir",
                    minlength: "La contraseña debe ser de al menos de 7 carácteres",
                    maxlength: "Demasiada extenso"
                },
                phone: {
                    required: "El campo de teléfono no puede estar vacio",
                    number: "Debe ser un valor numérico",
                    minlength: "Demasiado corto",
                    maxlength: "Demasiado extenso"
                },
                gender: {
                    required: "Debe seleccionar una opción"
                },
                country: {
                    required: "Debe seleccionar una opción"
                }
            }
        });
    });
</script>